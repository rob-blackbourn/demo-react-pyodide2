{"version":3,"sources":["components/Matrix.js","components/MatrixMultiplication.js","utils.js","pythonCode.js","App.js","reportWebVitals.js","index.js"],"names":["Matrix","this","props","values","readOnly","onChange","classes","className","divTable","map","row","i","divTableRow","column","j","divTableCol","TextField","cell","value","e","target","Component","defaultProps","readonly","withStyles","theme","button","margin","spacing","width","textAlign","display","borderLeft","borderRight","borderSpacing","clear","MatrixMultiplication","generateExercise","state","maxNumberOfRows","maxNumberOfColumns","generator","then","result","setState","answer","C","col","hasExercise","isGenerating","catch","error","console","log","onChangeHandler","intValue","parseInt","Number","isInteger","matrix","r","c","updateMatrixCell","handleSubmit","event","preventDefault","m","n","p","A","B","isCorrect","lhs","rhs","length","lhsRow","rhsRow","isMatrixEqual","Container","maxWidth","Paper","paper","onSubmit","parameter","type","label","Button","disabled","exercise","Typography","variant","rightAnswer","wrongAnswer","height","float","flexDirection","alignItems","color","PYTHON_CODE","wrapGenerateMatmulExercise","pyodide","func","globals","get","a","obj","results","toJs","x","Array","from","destroy","importLocalPythonCode","runPythonAsync","generateMatmulExercise","App","localPythonCode","window","loadPyodide","indexURL","progress","LinearProgress","position","top","left","transform","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.21fe9cbc.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { withStyles } from '@material-ui/core/styles'\nimport TextField from '@material-ui/core/TextField'\n\nconst styles = (theme) => ({\n  button: {\n    margin: theme.spacing(1, 1, 0, 0)\n  },\n  cell: {\n    width: '4ch',\n    margin: theme.spacing(1),\n    '& .MuiInputBase-input': {\n      textAlign: 'center'\n    }\n  },\n  divTable: {\n    display: 'inline-flex',\n    width: 'auto',\n    borderLeft: '1px solid #666666',\n    borderRight: '1px solid #666666',\n    borderSpacing: '5px',\n    margin: theme.spacing(1)\n  },\n  divTableRow: {\n    display: 'table-row',\n    width: 'auto',\n    clear: 'both'\n  },\n  divTableCol: {\n    // float: 'left' /* fix for  buggy browsers */,\n    display: 'tableColumn',\n    width: 'auto'\n  }\n})\n\nclass Matrix extends Component {\n  render() {\n    const { values, readOnly, onChange, classes } = this.props\n\n    return (\n      <div className={classes.divTable}>\n        {values.map((row, i) => (\n          <div key={`row-${i}`} className={classes.divTableRow}>\n            {row.map((column, j) => (\n              <div className={classes.divTableCol} key={`cell-${i}-${j}`}>\n                <TextField\n                  className={classes.cell}\n                  value={column}\n                  readOnly={readOnly}\n                  onChange={(e) => onChange(i, j, e.target.value)}\n                />\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    )\n  }\n}\n\nMatrix.propTypes = {\n  values: PropTypes.arrayOf(PropTypes.array),\n  onChange: PropTypes.func,\n  readOnly: PropTypes.bool\n}\n\nMatrix.defaultProps = {\n  readonly: false,\n  onChange: () => {}\n}\n\nexport default withStyles(styles)(Matrix)\n","import React, { Component } from 'react'\nimport { withStyles } from '@material-ui/core/styles'\nimport PropTypes from 'prop-types'\nimport Container from '@material-ui/core/Container'\nimport Paper from '@material-ui/core/Paper'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Matrix from './Matrix'\nimport { updateMatrixCell, isMatrixEqual } from '../utils'\n\nconst styles = (theme) => ({\n  paper: {\n    height: '100vh'\n  },\n  button: {\n    margin: theme.spacing(1, 1, 0, 0),\n    float: 'right'\n  },\n  parameter: {\n    width: '12ch',\n    margin: theme.spacing(1)\n  },\n  exercise: {\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center'\n  },\n  rightAnswer: {\n    color: 'green'\n  },\n  wrongAnswer: {\n    color: 'red'\n  }\n})\n\nclass MatrixMultiplication extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      maxNumberOfRows: 3,\n      maxNumberOfColumns: 3,\n      hasExercise: false,\n      isGenerating: false,\n      m: 1,\n      n: 1,\n      p: 1,\n      A: [[0]],\n      B: [[0]],\n      C: [[0]],\n      answer: [[0]]\n    }\n  }\n\n  generateExercise = () => {\n    const { maxNumberOfRows, maxNumberOfColumns } = this.state\n    this.props\n      .generator(maxNumberOfRows, maxNumberOfColumns)\n      .then((result) => {\n        this.setState({\n          ...result,\n          answer: result.C.map((row) => row.map((col) => '')),\n          hasExercise: true,\n          isGenerating: false\n        })\n      })\n      .catch((error) => {\n        console.log(error)\n      })\n  }\n\n  onChangeHandler = (i, j, value) => {\n    const intValue = parseInt(value)\n    if (Number.isInteger(intValue)) {\n      value = intValue\n    }\n    const answer = updateMatrixCell(this.state.answer, i, j, value)\n    this.setState({\n      answer\n    })\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault()\n    this.setState(\n      {\n        isGenerating: true\n      },\n      this.generateExercise\n    )\n  }\n\n  render() {\n    const { maxNumberOfRows, maxNumberOfColumns, A, B, C, answer, hasExercise, isGenerating } = this.state\n    const { classes } = this.props\n\n    const isCorrect = isMatrixEqual(C, answer)\n\n    return (\n      <Container maxWidth=\"sm\">\n        <Paper className={classes.paper}>\n          <form onSubmit={this.handleSubmit}>\n            <TextField className={classes.parameter} type=\"number\" value={maxNumberOfRows} label=\"Max Rows\" />\n            <TextField className={classes.parameter} type=\"number\" value={maxNumberOfColumns} label=\"Max Columns\" />\n            <Button className={classes.button} type=\"submit\" disabled={isGenerating}>\n              New Exercise\n            </Button>\n          </form>\n          <div className={classes.exercise}>\n            {hasExercise ? (\n              <>\n                <Matrix values={A} readOnly={true} />\n                <Matrix values={B} readOnly={true} />\n                <span>=</span>\n                <Matrix values={answer} readOnly={false} onChange={this.onChangeHandler} />\n              </>\n            ) : (\n              <Typography variant=\"body1\">Click the button to generate a new exercise</Typography>\n            )}\n            {hasExercise ? (\n              <div>\n                {isCorrect ? (\n                  <Typography className={classes.rightAnswer} variant=\"body1\">\n                    Correct\n                  </Typography>\n                ) : (\n                  <Typography className={classes.wrongAnswer} variant=\"body1\">\n                    Incorrect\n                  </Typography>\n                )}\n              </div>\n            ) : (\n              ''\n            )}\n          </div>\n        </Paper>\n      </Container>\n    )\n  }\n}\n\nMatrixMultiplication.propTypes = {\n  classes: PropTypes.object,\n  generator: PropTypes.func\n}\n\nexport default withStyles(styles)(MatrixMultiplication)\n","export function updateMatrixCell(matrix, i, j, value) {\n  return matrix.map((row, r) => row.map((column, c) => (r === i && c === j ? value : column)))\n}\n\nexport function getMatrixShape(matrix) {\n  return [matrix.length, matrix.length === 0 ? 0 : matrix[0].length]\n}\n\nexport function isMatrixEqual(lhs, rhs) {\n  if (lhs.length !== rhs.length) {\n    return false\n  }\n  for (let i = 0; i < lhs.length; ++i) {\n    const lhsRow = lhs[i]\n    const rhsRow = rhs[i]\n    if (lhsRow.length !== rhsRow.length) {\n      return false\n    }\n    for (let j = 0; j < lhsRow.length; ++j) {\n      if (lhsRow[j] !== rhsRow[j]) {\n        return false\n      }\n    }\n  }\n  return true\n}\n","const PYTHON_CODE = `\nimport random\nimport numpy as np\n\n# Make the function async so it becomes a promise in JavaScript.\nasync def generate_matmul_exercise(max_rows, max_cols):\n  m = random.randint(1, max_rows)\n  n = random.randint(1, max_cols)\n  p = random.randint(1, max_cols)\n\n  rng = np.random.default_rng()\n  A = rng.integers(low=-10, high=10, size=(m, n), dtype=np.int32)\n  B = rng.integers(low=-10, high=10, size=(n, p), dtype=np.int32)\n  C = A @ B\n\n  return {\n      'm': m,\n      'n': n,\n      'p': p,\n      'A': A,\n      'B': B,\n      'C': C\n  }    \n`\n\nfunction wrapGenerateMatmulExercise(pyodide) {\n  const func = pyodide.globals.get('generate_matmul_exercise')\n\n  return async (maxNumberOfRows, maxNumberOfColumns) => {\n    const obj = await func(maxNumberOfRows, maxNumberOfColumns)\n    const results = {\n      m: obj.get('m'),\n      n: obj.get('n'),\n      p: obj.get('p'),\n      A: obj\n        .get('A')\n        .toJs()\n        .map((x) => Array.from(x)),\n      B: obj\n        .get('B')\n        .toJs()\n        .map((x) => Array.from(x)),\n      C: obj\n        .get('C')\n        .toJs()\n        .map((x) => Array.from(x))\n    }\n    obj.destroy()\n    return results\n  }\n}\n\nexport async function importLocalPythonCode(pyodide) {\n  await pyodide.runPythonAsync(PYTHON_CODE)\n\n  const generateMatmulExercise = wrapGenerateMatmulExercise(pyodide)\n\n  return {\n    generateMatmulExercise\n  }\n}\n","import React, { Component } from 'react'\nimport { withStyles } from '@material-ui/core/styles'\nimport PropTypes from 'prop-types'\nimport LinearProgress from '@material-ui/core/LinearProgress'\nimport Typography from '@material-ui/core/Typography'\nimport MatrixMultiplication from './components/MatrixMultiplication'\nimport { importLocalPythonCode } from './pythonCode'\n\nconst styles = (theme) => ({\n  progress: {\n    position: 'fixed',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)'\n  }\n})\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      pyodide: null,\n      localPythonCode: null\n    }\n  }\n\n  async componentDidMount() {\n    const pyodide = await window.loadPyodide({ indexURL: 'https://cdn.jsdelivr.net/pyodide/v0.17.0/full/' })\n    const localPythonCode = await importLocalPythonCode(pyodide)\n    this.setState({ pyodide, localPythonCode })\n  }\n\n  render() {\n    const { pyodide, localPythonCode } = this.state\n    const { classes } = this.props\n\n    return pyodide == null ? (\n      <div className={classes.progress}>\n        <Typography variant=\"h2\">Loading Python</Typography>\n        <LinearProgress />\n      </div>\n    ) : (\n      <div>\n        <MatrixMultiplication generator={localPythonCode.generateMatmulExercise} />\n      </div>\n    )\n  }\n}\n\nApp.propTypes = {\n  classes: PropTypes.object\n}\n\nexport default withStyles(styles)(App)\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport '@fontsource/roboto'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <>\n    <CssBaseline />\n    <App />\n  </>,\n  document.getElementById('root')\n)\n\nreportWebVitals()\n"],"sourceRoot":""}